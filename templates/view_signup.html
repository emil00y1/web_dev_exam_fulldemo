{% include "_top.html" %} 

<main id="view_signup" class="mx-4 mb-16" md="mx-6" lg="mx-8">
    <section class="mx-auto max-w-100 pb-4" sm="d-flex flex-col h-full j-content-center">
        <h1 class="mb-8">Signup</h1>
        <div id="loader" class="p-relative d-none">
            <!-- Outer circle -->
            <div class="w-16 h-16 border-4 border-c-tealblue:-6 rounded-full"></div>
            
            <!-- Spinning segment -->
            <div class="w-16 h-16 border-4 border-transparent border-t-c-tealblue:+2 rounded-full p-absolute top-0 left-0 animation-spin"></div>
        </div>
        <form id="frm_user_signup" class="d-flex flex-col gap-4" >
            <div class="d-flex flex-col">
                <label for="user_name">
                    <span>Name</span>
                </label>
                <input name="user_name" id="user_name" type="text" mix-check="{{ x.USER_NAME_REGEX }}" focus="outline-1 outline-c-tealblue:-6" mix-error="Must be 2 to 20 characters">
            </div>
    
            <div class="d-flex flex-col">
                <label for="user_last_name">
                    <span>Last name</span>
                </label>
                <input name="user_last_name" id="user_last_name" type="text" mix-check="{{ x.USER_LAST_NAME_REGEX }}" focus="outline-1 outline-c-tealblue:-6" mix-error="Must be 2 to 20 characters">
            </div>        
    
            <div class="d-flex flex-col">
                <label for="user_role">
                    <span>Role</span>
                </label>
                <select name="role" id="user_role" class=" br-4 bg-c-white h-12 px-2 text-100 text-t-capitalize rounded-sm border-1 border-c-gray:+25" focus="outline-1 outline-c-tealblue:-6">
                    {% for role in roles %}
                        <option value="{{ role.role_pk }}">{{ role.role_name }}</option>
                    {% endfor %}
                </select>
            </div>
            
            <!-- New address fields - initially hidden -->
            <div id="address_fields" class="d-none">
                <div class="d-flex flex-col gap-4 bg-c-tealblue:+46 pa-4 rounded-md mt-2">
                    <h3 class="text-c-tealblue:-10 text-w-semibold">Restaurant Address</h3>
                    
                    <div class="d-flex flex-col">
                        <label for="street">Street</label>
                        <input name="street" id="street" type="text" class="bg-c-white" focus="outline-1 outline-c-tealblue:-6"
                        mix-check="{{ x.REGEX_STREET}}"
                        mix-error="Must be 2 to 50 characters">
                    </div>

                    <div class="d-flex flex-col">
                        <label for="house_number">House Number</label>
                        <input name="house_number" id="house_number" type="text" class="bg-c-white" focus="outline-1 outline-c-tealblue:-6" mix-error="Field is required"
                        mix-check="{{ x.REGEX_FIELD_REQUIRED}}" >
                    </div>

                    <div class="d-flex flex-col">
                        <label for="postcode">Postal Code</label>
                        <input name="postcode" id="postcode" type="text" class="bg-c-white" focus="outline-1 outline-c-tealblue:-6" mix-check="{{ x.REGEX_POSTAL_CODE}}" mix-error="Must be a valid postal code">
                    </div>

                    <div class="d-flex flex-col">
                        <label for="city">City</label>
                        <input name="city" id="city" type="text" class="bg-c-white" focus="outline-1 outline-c-tealblue:-6" mix-check="{{ x.REGEX_FIELD_REQUIRED}}" mix-error="Field is required">
                    </div>
                </div>
            </div>
    
            <div class="d-flex flex-col">
                <label for="user_email">
                    <span>E-mail</span>
                </label>
                <input name="user_email" id="user_email" type="text" mix-check="{{ x.REGEX_EMAIL }}" focus="outline-1 outline-c-tealblue:-6">
            </div>
    
            <div class="d-flex flex-col">
                <label for="user_password" class="d-flex">
                    <span>Password</span>
                    <span class="ml-auto text-c-gray:+25">{{ x.USER_PASSWORD_MIN }} to {{ x.USER_PASSWORD_MAX }} chars</span>
                </label>
                <input name="user_password" id="user_password" type="password" mix-check="{{ x.REGEX_USER_PASSWORD }}" focus="outline-1 outline-c-tealblue:-6">
            </div>        
    
            <button mix-post="/users" mix-data="#frm_user_signup" mix-default="Sign up" mix-await="Signing up..." class="text-c-white bg-c-tealblue:-5 cursor-pointer py-3 px-5 rounded-sm" hover="bg-c-tealblue:-8" focus="outline-1 outline-c-tealblue:-5 outline-o-0.5">
                Sign up
            </button>
    
            <p>Already have an account? | <a href="{{url_for('view_login')}}" class="text-a-center text-c-black text-d-underline">Login</a></p>
        </form>
    </section>
</main>


{% include "_bottom.html" %}
